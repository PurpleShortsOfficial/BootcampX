# Assignment 007 (Nitrogen)

> This assignment is due by 5:00 PM, 21 March 2025.
>
> Once you've completed the assignment, submit it over [here](https://forms.gle/GyPTWrQb5B8wwEDm8).

In this assignment, you will design a backend system for a **food ordering platform** that supports multiple restaurants. Your task is to create a **relational database schema** and implement REST API endpoints for managing customers, restaurants, menu items, and orders.

_**NOTE: Your assignment repository should be named `nitrogen`.**_

## **Database Schema**

### **1. Customers**

- **`id`** <br/> `Primary Key`
- **`name`** <br/> `String` `Required`
- **`email`** <br/> `String` `Unique` `Required`
- **`phoneNumber`** <br/> `String` `Unique` `Required`
- **`address`** <br/> `String` `Required`

### **2. Restaurants**

- **`id`** <br/> `Primary Key`
- **`name`** <br/> `String` `Unique` `Required`
- **`location`** <br/> `String` `Required`

### **3. Menu Items**

- **`id`** <br/> `Primary Key`
- **`restaurantId`** <br/> `Foreign Key → Restaurants.id` `Required`
- **`name`** <br/> `String` `Required`
- **`price`** <br/> `Decimal` `Required`
- **`isAvailable`** <br/> `Boolean` `Default: TRUE`

### **4. Orders**

- **`id`** <br/> `Primary Key`
- **`customerId`** <br/> `Foreign Key → Customers.id` `Required`
- **`restaurantId`** <br/> `Foreign Key → Restaurants.id` `Required`
- **`status`** <br/> `Enum('Placed', 'Preparing', 'Completed', 'Cancelled')` `Default: 'Placed'`
- **`totalPrice`** <br/> `Decimal` `Required`
- **`orderTime`** <br/> `Timestamp` `Default: CURRENT_TIMESTAMP`

### **5. Order Items** (Join Table)

- **`id`** <br/> `Primary Key`
- **`orderId`** <br/> `Foreign Key → Orders.id` `Required`
- **`menuItemId`** <br/> `Foreign Key → Menu Items.id` `Required`
- **`quantity`** <br/> `Integer` `Required`

---

## **API Endpoints to Implement**

### **1. Customers**

- `POST` `/customers` → Register a new customer
- `GET` `/customers/{id}` → Retrieve details of a customer
- `GET` `/customers/{id}/orders` → Retrieve all orders placed by this customer

### **2. Restaurants**

- `POST` `/restaurants` → Register a new restaurant
- `GET` `/restaurants/{id}/menu` → Get all available menu items from a restaurant

### **3. Menu Items**

- `POST` `/restaurants/{id}/menu` → Add a menu item to a restaurant
- `PATCH` `/menu/{id}` → Update availability or price of a menu item

### **4. Orders**

- `POST` `/orders` → Place an order (includes items and quantities)
- `GET` `/orders/{id}` → Retrieve details of a specific order
- `PATCH` `/orders/{id}/status` → Update the status of an order (e.g., from `Placed` to `Preparing`)

### **5. Reports & Insights**

- `GET` `/restaurants/{id}/revenue` → Get total revenue generated by a restaurant
- `GET` `/menu/top-items` → Retrieve the most ordered menu item across all restaurants
- `GET` `/customers/top` → Get the top 5 customers based on the number of orders placed
